@model List<BookCave.Models.ViewModels.CartViewModel>
@using Microsoft.AspNetCore.Identity
@using System.Security.Claims

@inject SignInManager<ApplicationUser> SignInManager

    @{
        var claim = ((ClaimsIdentity) User.Identity);
    }

@if(SignInManager.IsSignedIn(User))
{
    <!-- logged in user gets items from List.. this is HttpGet request -->
    <h2> hello signed in user </h2>
    <div id="cart-logged-in-user" class="grid-cart"> 
        @foreach(var item in Model) 
        {
            <div class="grid-cart-item"> item id: @item.ItemId 
                <div class="grid-cart-item-title"> @item.Title </div>
                        <div class="grid-cart-item-price">
                            <div class="user-item-quantity" data-quantity=@item.Quantity> Quantity: @item.Quantity </div>
                            <div class="user-item-price" data-price=@item.Price> Price for each: @item.Price </div> 
                        </div>
                        <div class="grid-cart-buttons">
                            <div>
                                <button data-useritemadd=@item.ItemId class="user-cart-item-add btn btn-success">+</button>
                            </div>
                            <div>
                                <button data-useritemremove=@item.ItemId class="user-cart-item-remove btn btn-danger">-</button>
                            </div>
                        </div>
                    </div>
        }
    </div>
}
else 
{
    <!-- logged out user gets items from Ajax (LocalStorage).. this is HttpPost request -->
    <div id="cart">    
        <h2> Cart List in /Cart/Index </h2>
        <table class="table table-striped table-hover" id="cart-table">
            <tr>
                <th> Item id</th>
                <th> Title </th>
                <th> Quantity </th>
                <th> Price </th>
                <th></th> <!-- empty th for add one item -->
                <th></th> <!-- empty th for remove one item -->
            </tr>
        </table>
        <div id="cart-loader"></div>
        <div id="cart-items"> </div>
        
        <div class="grid-cart"></div>
        
        <button class="buy-books"> BUY </button>
    </div>
}



<!-- 

@foreach(var item in Model)
{
    <tr>
        <td>@item.ItemId</td>
        <td>@item.Quantity</td>
    </tr>
}    
-->

